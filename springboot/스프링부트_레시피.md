ğŸ”ëª©ì°¨

1. [Bean êµ¬ì„±](https://www.notion.so/SpringBoot-048bc0633bda424db27100dce5637f3a#3586aa03f73e4b6f8d84ee73b33b51bd)
2. [Properties êµ¬ì„±](https://www.notion.so/SpringBoot-048bc0633bda424db27100dce5637f3a#66a3d55369f04cfa958455e2960261b4)
3. Test í…ŒìŠ¤íŒ…
4. [LogginLogging êµ¬ì„±](https://www.notion.so/SpringBoot-048bc0633bda424db27100dce5637f3a#ab401469fdcb4e66b442e0d04b1466ec)
5. [Spring MVC](https://www.notion.so/SpringBoot-048bc0633bda424db27100dce5637f3a#3ed8d5b0a3d94bfbb0dd9d1e699911e2) êµ¬ì„±
6. [ì—ëŸ¬í˜ì´ì§€ ë Œë”ë§](https://www.notion.so/SpringBoot-048bc0633bda424db27100dce5637f3a#04d70c3691d94b07b5e1a8d8da28ef04)

## Bean êµ¬ì„±

`@SpringBootApplication` êµ¬ì„±

í•´ë‹¹ ì• ë…¸í…Œì´ì…˜ì˜ ê²½ìš°, ìµœìƒìœ„ íŒ¨í‚¤ì§€ì— ìœ„ì¹˜ì‹œí‚¤ëŠ” ê²ƒì„ ì¶”ì²œí•¨. ìë™ìœ¼ë¡œ í•´ë‹¹ íŒ¨í‚¤ì§€ ë° í•˜ìš° íŒ¨í‚¤ì§€ì— ì •ì˜ëœ ëª¨ë“  ì• ë…¸í…Œì´ì…˜ì´ ë¶™ì€ `@Component`, `@Configuation` í´ë˜ìŠ¤ë¥¼ ê°ì§€í•˜ê¸° ë•Œë¬¸ì´ë‹¤.

- `@Configuration`

    ìë°” êµ¬ì„± í´ë˜ìŠ¤.

- `@ComponentScan`

    ì»´í¬ë„ŒíŠ¸ íƒìƒ‰, `@Component` ì¶”ê°€ëœ í´ë˜ìŠ¤ëŠ” ìë™ìœ¼ë¡œ ê°ì§€ë¼ ìŠ¤í”„ë§ ë¶€íŠ¸ì— ì˜í•´ ê°ì²´í™” ë¨.

- `@EnableAutoconfiguration`

    ìŠ¤í”„ë§ë¶€íŠ¸ì˜ ìë™ êµ¬ì„±ì„ ì‚¬ìš©í•¨.

`@PostConstruct`

ì• ë…¸í…Œì´ì…˜ì´ ë¶™ì€ ë©”ì†Œë“œëŠ” ê°ì²´ ìƒì„± ë° ì˜ì¡´ì„±ì´ ì£¼ì…ëœ ë’¤ ì‹¤í–‰ì´ ëœë‹¤.

`@Bean`

ìë™ìœ¼ë¡œ ì»´í¬ë„ŒíŠ¸ë¥¼ ê°ì§€í•˜ëŠ” ê²ƒ ì´ì™¸ì—, íŒ©í† ë¦¬ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ ë¹ˆì„ ìƒì„±í•  ìˆ˜ ìˆëŠ” ë°©ë²•. ì´ ë°©ì‹ì€ ë¹ˆì˜ ìƒì„±ìì— ì¶”ê°€ ì œì–´ê°€ í•„ìš”í•  ë•Œ ìœ ìš©í•˜ë‹¤. íŒ©í† ë¦¬ í•¨ìˆ˜ë€ `@Bean` ì• ë…¸í…Œì´ì…˜ì´ ë¶™ì€ í•¨ìˆ˜ì´ë©°, ë¹ˆì„ Application contextì— ë“±ë¡í•˜ê³ , ì´ë•Œ **ë¹ˆì˜ ì´ë¦„**ì€ **ë©”ì†Œë“œì˜ ì´ë¦„**ê³¼ ë™ì¼í•˜ë‹¤. `@Bean` ì• ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œ `@Configuration` ì• ë…¸í…Œì´ì…˜ ë˜ëŠ” `@SpringBootApplication` ì• ë…¸í…Œì´ì…˜ì´ ë¶™ì€ í´ë˜ìŠ¤ì— ì¶”ê°€í•˜ë©´ ëœë‹¤.

```java
@Bean
public Calculator beanTest() {
    return new Calculator();
}
```

`Calculator calc = ctx.getBean(Calculator.class);` 

```java
@Bean
public ApplicationRunner runner(Calculator calculator) {
    return calculator.add(10, 20);
}
```

SpringBootì—ëŠ” ApplicationRunner ì¸í„°í˜ì´ìŠ¤ê°€ ì¡´ì¬í•˜ê³ , ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì‹œì‘ëœ ë’¤ ì¼ë¶€ ì½”ë“œë¥¼ ìˆ˜í–‰í•  ë•Œ ì‚¬ìš©í•œë‹¤. Calculator ê°ì²´ë¥¼ ìƒì„±í•  í•¨ìˆ˜ê°€ ApplicationRunnerì— ì˜í•´ ëŒ€ì²´ëœ ë°©ì‹ì´ë©°ApplicationContextë¡œë¶€í„° ìˆ˜ë™ìœ¼ë¡œ ë¹ˆì„ ê°€ì ¸ì˜¬ í•„ìš”ê°€ ì—†ë‹¤.

## Properties ì†ì„±

SpringBootëŠ” ì†ì„±ì„ ë‹¤ì–‘í•œ ìœ„ì¹˜ì—ì„œ ê°€ì ¸ì˜¤ëŠ” ê²ƒì„ ì§€ì›í•œë‹¤. ê¸°ë³¸ì ìœ¼ë¡œ `[application.properties](http://application.properties)` íŒŒì¼ì„ í†µí•´ ì†ì„±ì„ ê´€ë¦¬í•  ìˆ˜ ìˆë‹¤. ë˜í•œ í”„ë¡œí•„ì„ ì‚¬ìš©í•´ì„œ êµ¬ì„± ì „ë¶€ë¥¼ ëŒ€ì²´í•  ìˆ˜ ìˆë‹¤. 

> ì¦‰, src/main/resourcesì— `application-dev.properties`, `application-qa.properties, application-release.properties` ìš´ì˜í™˜ê²½ì— ë§ë„ë¡ ì—¬ëŸ¬ê°€ì§€ í”„ë¡œí•„ì— ë”°ë¥¸ propertiesë¥¼ ë§Œë“¤ë©´ ê°œë°œë‹¨ê³„ì—ì„œ ì‹¤ì œì„œë¹„ìŠ¤ê¹Œì§€ ì»¨íŠ¸ë¡¤í•˜ê¸° í¸í•˜ë‹¤.

- properties ìš°ì„ ìˆœìœ„
    1. Command Line
    2. íŒ¨í‚¤ì§•ëœ ì• í”Œë¦¬ì¼€ì´ì…˜ ì™¸ë¶€ì˜ application-{profile}.properties
    3. íŒ¨í‚¤ì§•ëœ ì• í”Œë¦¬ì¼€ì´ì…˜ ì™¸ë¶€ì˜ application.properties
    4. íŒ¨í‚¤ì§•ëœ ì• í”Œë¦¬ì¼€ì´ì…˜ ë‚´ë¶€ì˜ application-{profile}.properties
    5. íŒ¨í‚¤ì§•ëœ ì• í”Œë¦¬ì¼€ì´ì…˜ ë‚´ë¶€ì˜ application-.properties

`@Value`

ìŠ¤í”„ë§ì´ ì†ì„±ì„ ì°¾ê³  í•´ë‹¹ ì†ì„±ì˜ ê°’ì„ ì‚¬ìš©í•˜ë„ë¡ ì§€ì‹œí•œë‹¤. ì„¸ë¯¸ì½œë¡ ì„ í†µí•´ ê¸°ë³¸ê°’ì„ ì§€ì •í•  ìˆ˜ ìˆë‹¤.

```java
@Value("${profile:qa}") // ê°’ì„ ì°¾ê¸° ëª»í–ˆì„ ê²½ìš°, ê¸°ë³¸ê°’ 'qa'
```

## Test í…ŒìŠ¤íŒ…

```java
import com.example.boot.recipe.test.Testcontroller;
import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.autoconfigure.web.servlet.WebMvcTest;
import org.springframework.http.MediaType;
import org.springframework.test.web.servlet.MockMvc;
import org.springframework.test.web.servlet.request.MockMvcRequestBuilders;
import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.content;
import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.status;

@WebMvcTest(Testcontroller.class)
class RecipeApplicationTests {

    @Autowired
    private MockMvc mockMvc;

    @Test
    public void testController() throws Exception {
        mockMvc.perform(MockMvcRequestBuilders.get("/"))
                .andExpect(status().isOk())
                .andExpect(content().string("í…ŒìŠ¤íŒ…"))
                .andExpect(content().contentTypeCompatibleWith(MediaType.TEXT_PLAIN));
    }

}
```

## Logging êµ¬ì„±

SpringBootì—ëŠ” ì§€ì›ë˜ëŠ” ë¡œê·¸ì œê³µì(LogBack, Log4j 2, Java Log)ë¥¼ ìœ„í•œ ê¸°ë³¸êµ¬ì„±ì´ ìˆë‹¤. ê¸°ë³¸ êµ¬ì„±ì— application.propertiesë¥¼ ì‚¬ìš©í•´ ë¡œê¹… ìˆ˜ì¤€, íŒ¨í„´ ì •ì˜, ë¡œê·¸ íŒŒì¼ ìœ„ì¹˜ êµ¬ì„± ë“±ì„ ì¶”ê°€í•  ìˆ˜ ìˆë‹¤.

ë¡œê·¸ APIë¡œëŠ” SLF4Jë¥¼ ì¸í„°í˜ì´ìŠ¤ë¡œ ì‚¬ìš©í•˜ê³  ìˆì–´ì„œ Logging frameworkë¥¼ ì„ íƒí•´ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë¶€ë¶„ì´ë‹¤.

## Spring MVC êµ¬ì„±

SpringBootëŠ”  Spring MVCì— í•„ìš”í•œ ì»´í¬ë„ŒíŠ¸ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ `spring-boot-starter-web` ì„ ì˜ì¡´ì„±ì— ì¶”ê°€í•´ì•¼ í•œë‹¤.

- ê¸°ë³¸ êµ¬ì„±ë˜ëŠ” ì„œë¸”ë¦¿ í•„í„°(ìë™ìœ¼ë¡œ ë“±ë¡ë˜ëŠ” ì„œë¸”ë¦¿ í•„í„°)
    1. CharaterEncodingFilter

        spring.http.encoding.charset ì†ì„±ìœ¼ë¡œ ì„¤ì • ê°€ëŠ¥í•œ êµ¬ì„±ì´ë©°, ê¸°ë³¸ì ìœ¼ë¡œ UTF-8ë¡œ ì¸ì½”ë”©ì„ ê°•ì œí•œë‹¤.

    2. HiddenHttpMethodFilter

        ì‹¤ì œ HTTP ë©”ì†Œë“œë¥¼ ì •ì˜í•˜ëŠ” _methodë¡œ ì´ë¦„ ì§€ì–´ì§„ ìˆ¨ê²¨ì§„ ì–‘ì‹ í•„ë“œì˜ ì‚¬ìš©ì„ í™œì„±í™” í•œë‹¤.

    3. FormContentFilter

        PUT, PATCH, DELETE ìš”ì²­ì„ ì–‘ì‹ í• ë‹¹ì— ìš©ì´í•˜ë„ë¡ ë§¤í•‘í•œë‹¤.

    4. RequestContextFilter

        í˜„ì¬ ìš”ì²­ì„ ìŠ¤ë ˆë“œë¡œ ë…¸ì¶œí•œë‹¤.

## ì—ëŸ¬í˜ì´ì§€ ë Œë”ë§

SpringBootì—ì„œ ê¸°ë³¸ì ìœ¼ë¡œ ì˜¤ë¥˜ì²˜ë¦¬ê°€ í™œì„±í™” ë¼ ìˆìœ¼ë¯€ë¡œ ê¸°ë³¸ ì˜¤ë¥˜ í˜ì´ì§€ë¥¼ ë³¼ ìˆ˜ ìˆë‹¤. `server.error.whitelabel.enable=false` ì†ì„±ì„ í†µí•´ ì „ì²´ ë¹„í™œì„±í™” í•  ìˆ˜ ìˆë‹¤.

```
server.error.whitelabel.enable=true // ì¼ë°˜ ì—ëŸ¬í˜ì´ì§€ í™œì„±í™”
server.error.path=/error // ì—ëŸ¬í˜ì´ì§€ ê²½ë¡œ
server.error.include-exception=false // ì˜ˆì™¸ì²˜ë¦¬ ì´ë¦„ í¬í•¨ ì—¬ë¶€
server.error.include-stacktrace=never // stacktrace í¬í•¨ ì—¬ë¶€
```

ì—ëŸ¬í˜ì´ì§€ë¥¼ ë°”ê¾¸ê³  ì‹¶ë‹¤ë©´, main/resource/templates í´ë”ì— error.htmlì„ ì¶”ê°€í•˜ê³  ì»¤ìŠ¤í„°ë§ˆì´ì§• í•˜ë©´ ëœë‹¤.

ë§Œì•½, ì—ëŸ¬ì½”ë“œ ë³„ ì—ëŸ¬í˜ì´ì§€ë¥¼ ë§Œë“¤ê³  ì‹¶ë‹¤ë©´ `{http-error-status}.html` ì„ ë”°ë¡œ ë§Œë“¤ì–´ë³´ì. í•´ë‹¹ ì—ëŸ¬ê°€ ë°œìƒí–ˆì„ ê²½ìš°, í•´ë‹¹ htmlí˜ì´ì§€ë¡œ ë Œë”ë§ ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.(4xx.hmlë¡œ ë²”ìœ„í˜•ë„ ê°€ëŠ¥)